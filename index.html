<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="/style.css" />
    <title>Hello, World!</title>
</head>

<body>
    <div id="nav">
        <h1 id="homelink">codeCoach</h1>
    </div>
    <div class="box">

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <div>
            <canvas id="myChart"></canvas>
        </div>
        <script>
            const data = JSON.parse("{{ . }}")
            console.log(data)
            const ctx = document.getElementById('myChart');

            const dates = data.map(row => row.Date)
            console.log(dates)

            var reduced = [data[0]]
            const added = data.map(row => row.LinesAdded)

            const subtracted = data.map(row => row.LinesSubtracted)
            const cum = data.map(row => row.LinesAdded - row.LinesSubtracted)

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'lines added',
                            data: added,
                            borderWidth: 1
                        },
                        {
                            label: 'lines subtracted',
                            data: subtracted,
                            borderWidth: 1
                        },
                        {
                            label: 'cumulative',
                            data: cum,
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        </script>
    </div>
</body>

</html>